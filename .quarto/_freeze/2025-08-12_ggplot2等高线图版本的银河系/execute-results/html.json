{
  "hash": "9b95e2d45aca4048429d8bff1f87b1a3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: ggplot2â€œé“¶æ²³ç³»â€\nsubtitle: ggplot2ç­‰é«˜çº¿å›¾ç‰ˆæœ¬çš„â€œé“¶æ²³ç³»â€\ndate: 2025-08-12\ntoc-depth: 4\ntoc-expand: true\nlang: en\n---\n\nåœ¨2025-07-29æ—¥ï¼Œæˆ‘ä»¬å±•ç¤ºè¿‡H&Eèµ·æºç‰ˆæœ¬çš„â€œé“¶æ²³ç³»â€ï¼ˆ[QuPathï¼šâ€œé“¶æ²³ç³»â€èµ·æºäºH&E](2025-07-29_é“¶æ²³ç³»èµ·æºäºHE.qmd)ï¼‰ï¼Œç¬”è€…åœ¨è¿™é‡Œå°è¯•é€šè¿‡Rçš„ggplot2ï¼ˆåŒ…æ‹¬ä»£ç /R codesï¼‰æ¥å±•ç¤ºè¯¥â€œé“¶æ²³ç³»â€ã€‚\n\n## 1. åŠ è½½RåŒ…\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse) # Load the tidyverse package (include ggplot2) for data manipulation and visualization\nlibrary(RColorBrewer) # For color palettes\n```\n:::\n\n\n## 2. è¯»å–è¡¨æ ¼æ•°æ®å¹¶é€‰æ‹©åæ ‡åˆ—\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the table containing the location of detected objects (i.e. nuclei)\ntxt_file <- \"raw_data/2025-08-12_QuPath_InstanSeg.txt\"\ndf <- txt_file |> read_delim(delim = \"\\t\", col_names = TRUE, show_col_types = FALSE)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> names() # Display the column names\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Image\"                 \"Object ID\"             \"Object type\"          \n [4] \"Name\"                  \"Classification\"        \"Parent\"               \n [7] \"ROI\"                   \"Centroid X Âµm\"         \"Centroid Y Âµm\"        \n[10] \"Area Âµm^2\"             \"Length Âµm\"             \"Circularity\"          \n[13] \"Solidity\"              \"Max diameter Âµm\"       \"Min diameter Âµm\"      \n[16] \"Hematoxylin: Mean\"     \"Hematoxylin: Median\"   \"Hematoxylin: Min\"     \n[19] \"Hematoxylin: Max\"      \"Hematoxylin: Std.Dev.\" \"Eosin: Mean\"          \n[22] \"Eosin: Median\"         \"Eosin: Min\"            \"Eosin: Max\"           \n[25] \"Eosin: Std.Dev.\"      \n```\n\n\n:::\n\n```{.r .cell-code}\ndf <- df |> select(`Centroid X Âµm`, `Centroid Y Âµm`) # Select the two columns which correspond to the X and Y coordinates of detected nuclei\n\ndf |> head() # Display the first six rows of the data frame\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 2\n  `Centroid X Âµm` `Centroid Y Âµm`\n            <dbl>           <dbl>\n1            131.            88.4\n2            118.            90.2\n3            169.            90.9\n4            179.            95.0\n5            230.            96.5\n6            119.            96.8\n```\n\n\n:::\n:::\n\n\n## 3. å¢åŠ ä¸€ä¸ªâ€œrandom_colorâ€åˆ—ï¼Œç”¨äºæ¯ä¸ªç»†èƒæ ¸é¢œè‰²çš„éšæœºåˆ†é…\n\n\n::: {.cell}\n\n```{.r .cell-code}\npalette <- brewer.pal(8, \"Set2\") # get a color palette\n\ndf <- df |> \n  mutate(random_color = sample(palette, nrow(df), replace = TRUE)) # add a random color column\n\ndf |> head() # Display the first six rows of the updated data frame\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 3\n  `Centroid X Âµm` `Centroid Y Âµm` random_color\n            <dbl>           <dbl> <chr>       \n1            131.            88.4 #E5C494     \n2            118.            90.2 #FFD92F     \n3            169.            90.9 #FFD92F     \n4            179.            95.0 #A6D854     \n5            230.            96.5 #E78AC3     \n6            119.            96.8 #E5C494     \n```\n\n\n:::\n:::\n\n\n## 4. è®¾å®šä¸€ä¸ªä¸ªæ€§åŒ–çš„ä¸»é¢˜ï¼ˆthemeï¼‰\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# set a custome theme\ncustom_theme <- theme(\n  panel.grid = element_blank(), # remove grid lines\n  axis.text = element_blank(), # remove axis text\n  axis.title = element_blank(), # remove axis titles\n  axis.ticks = element_blank(), # remove axis ticks\n  legend.position = \"none\", # remove legend\n  panel.background = element_blank(), # remove panel background\n  plot.background = element_blank(), # remove plot background\n  plot.margin = margin(0, 0, 0, 0, \"cm\") # remove plot margins\n)\n```\n:::\n\n\n## 5. æ˜¾ç¤ºâ€œé“¶æ²³ç³»â€å¯¹åº”çš„ç»†èƒæ ¸åˆ†å¸ƒ\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x = `Centroid X Âµm`, y = `Centroid Y Âµm`)) +\n  geom_point(aes(color = random_color)) + # scatter plot\n  scale_x_continuous(limits = c(0, 896)) + # set x limits\n  scale_y_continuous(limits = c(0, 768)) + # set y limits\n  custom_theme # apply custom theme\n```\n\n::: {.cell-output-display}\n![](2025-08-12_ggplot2ç­‰é«˜çº¿å›¾ç‰ˆæœ¬çš„é“¶æ²³ç³»_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## 6. æ˜¾ç¤ºâ€œé“¶æ²³ç³»â€å¯¹åº”çš„ç»†èƒæ ¸åˆ†å¸ƒå’Œç­‰é«˜çº¿å›¾\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x = `Centroid X Âµm`, y = `Centroid Y Âµm`)) +\n  geom_point(aes(color = random_color)) + # scatter plot\n  geom_density_2d_filled(alpha = 0.6) + # add filled contour lines with transparency\n  scale_fill_brewer(palette = \"YlGn\") + # set fill color palette\n  scale_x_continuous(limits = c(0, 896)) + # set x limits\n  scale_y_continuous(limits = c(0, 768)) + # set y limits\n  custom_theme # apply custom theme\n```\n\n::: {.cell-output-display}\n![](2025-08-12_ggplot2ç­‰é«˜çº¿å›¾ç‰ˆæœ¬çš„é“¶æ²³ç³»_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## 7. â€œé“¶è¡Œç³»â€çš„èµ·æº\n\n<img src=\"images/he_low.png\" style=\"width: 100%; height: auto;\">\n\n[ç»™æˆ‘ä¹°æ¯èŒ¶ğŸµ](ç»™æˆ‘ä¹°æ¯èŒ¶.qmd)",
    "supporting": [
      "2025-08-12_ggplot2ç­‰é«˜çº¿å›¾ç‰ˆæœ¬çš„é“¶æ²³ç³»_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}