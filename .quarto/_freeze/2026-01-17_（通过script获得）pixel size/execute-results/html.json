{
  "hash": "e388965eeae494c3083529e7de3223f2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Pixel size\nsubtitle: （通过script获得）像素大小/pixel size\ndate: 2026-01-17\ntoc-depth: 4\ntoc-expand: true\nlang: en\n---\n\n## 1. 像素大小的定义(以显微镜为例)[@Pete_pixelSize]\n\n> One way to think about this in microscopy is to consider the field of view of an image, i.e. the width and height of the area that has been imaged. We can <mark>divide the width and height in physical units (often µm) by the number of pixels along that dimension</mark>.\n\n> The result is that we have two value in µm/px, corresponding to the <mark>pixel width and pixel height. Usually these are the same</mark>.\n\n## 2. 像素大小的意义[@Pete_pixelSize]\n\n> The ‘pixel size’ is an idea that helps us <mark>translate measurements we make in images to the sizes and positions of things in real life</mark>.\n\n> Knowing the pixel size makes it possible to calibrate size measurements. For example, if we measure some structure horizontally in the image and find that it is <mark>10 pixels in length</mark>, with a <mark>pixel size of 0.5µm</mark>, we can deduce that its <mark>actual length in reality is (approximately!) 10 × 0.5µm = 5µm</mark>.\n\n## 3. 通过QuPath查看像素大小\n\n#### 3.1 通过QuPath软件界面\n<center>\n![通过QuPath软件界面的image panel。](images/pixel-size_ui.png){width=\"100%\"}\n</center>\n\n通过QuPath软件界面的image panel，可知该HE染色的组织切片图像的pixel width和pixel height都是0.2739 µm。\n\n<mark>Pixel width和pixel height相同。</mark>\n\n#### 3.2 通过groovy script\n\n\n::: {.cell}\n\n```{.r .cell-code}\n// QuPath v0.6.0\n\n// Get image name, pixel width, pixel height, and pixel type.\ndef imageName = getCurrentImageNameWithoutExtension()\n\ndef metaData = getCurrentServer().getMetadata()\n\ndef pixelWidth = metaData.getPixelWidthMicrons()\ndef pixelHeight = metaData.getPixelHeightMicrons()\n\n// Print image name, pixel width, and pixel height.\nprintln \"Image name: ${imageName}\"\n\nprintln \"Pixel width: ${pixelWidth}\"\nprintln \"Pixel height: ${pixelHeight}\"\n\nprintln \"Done!\"\n```\n:::\n\n\n<center>\n![通过groovy script获得像素大小。](images/pixel-size_script.png){width=\"100%\"}\n</center>\n\n通过groovy script可知，该图像的pixel width为0.27385541963588983 µm，pixel height为0.27385493509814707 µm。\n\n<mark>严格来讲，pixel width和pixel height不同。</mark>\n\n**如果通过groovy script将pixel size四舍五入呢？**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n// QuPath v0.6.0\n\n// Get image name, pixel width, pixel height, and pixel type.\ndef imageName = getCurrentImageNameWithoutExtension()\n\ndef metaData = getCurrentServer().getMetadata()\n\ndef pixelWidth = metaData.getPixelWidthMicrons()\ndef pixelWidthRound = pixelWidth.round(4) // Round to 4 decimal places.\n\ndef pixelHeight = metaData.getPixelHeightMicrons()\ndef pixelHeightRound = pixelHeight.round(4)\n\n// Print image name, pixel width, and pixel height.\nprintln \"Image name: ${imageName}\"\n\nprintln \"Pixel width (rounded): ${pixelWidthRound}\"\nprintln \"Pixel height (rounded): ${pixelHeightRound}\"\n\nprintln \"Done!\"\n```\n:::\n\n\n<center>\n![通过groovy script获得像素大小，并四舍五入到小数点后第4位。](images/pixel-size_script_rounded.png){width=\"100%\"}\n</center>\n\n<mark>这时候（即四舍五入到小数点后第4位）pixel width和pixel height都是0.2739 µm。Pixel width和pixel height又相同了。</mark>\n\n[给我买杯茶](给我买杯茶.qmd)",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}